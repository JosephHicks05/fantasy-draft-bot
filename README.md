# Fantasy Football Draft Bot
This is a CLI Python project that can be used to make the optimal player selections in fantasy football drafts.

## to use
Simply run draft.py to start. If you are just using the program to make your draft decisions for you, respond "n" to the manually assign strategies prompt. After that, simply respond to the prompts to set up your draft. When asked who a player selected, responses must be given in the format `<player position i.e. RB or WR><first two characters of player first name><first two characters of player last name>`. For example, to indicate that Ja'Marr Chase the wide receiver was selected, you would type WR jach (case-insensitive). The numbers printed out for each position are discussed in the last section of this README.

## to alter
To alter the draft to contain other players or data, go to https://fantasy.espn.com/football/players/projections, and under "projections for" select current season. Then, copy the entire text of the table, starting at the top-left-most word "rank" and ending at the 50th player's outlook (both inclusive.) Then, paste this text into player_data_raw.txt (after deleting what's already there) and add a newline to the end. Then scroll to page 2 on the ESPN projection website and repeat this process for players 51-100, pasting in the new data right after the old onto the newline you created. Repeat this process for the first 400 players. Then go into players.py and set CSV_CURRENT to False on line 47. Run the program, then stop it, and you should find that player_data.csv has been updated. Set CSV_CURRENT back to True. To change the number of players that are starting at each position (i.e. 3 WR 2 RB league) go into strategy_common.py and alter the dictionary on line 10.

## how it works
Whenever it is the bot's turn to make a draft pick, its ultimate goal is to draft the best player (i.e. the player with the highest expected fantasy points earned per week) at the position that is the "most volatile." The most volatile position is the one that is expected to have lost the most potential value by the time the bot gets to pick again. For example, lets say the current best quarterback on the board is expected to earn 23 points per week, but the second best quarterback is only expected to earn 16 points per work. To further the point, lets even say that there are 3 people about to draft who haven't drafted a quarterback yet. This would make qb an extremely volatile position, so it would be good strategy to draft the 23 point quarterback even if there were players with higher expected points per week at other positions assuming those positions were less volatile.

Lets look at what exactly the bot does to determine which position is the most volatile. We'll look at qb at first but note that it does the same thing for every position. The bot starts by looking at the next person to draft, and asks the question "how likely is it that this person drafts a quarterback?" If they already have one and it's early rounds, that number is very close to 0%. If it's getting into round 8 or 9 and that person still doesn't have one, it's pretty close to 100%. The bot then creates a probability distribution for the number of quarterbacks drafted. This is just a mapping between numbers and the odds, as a proportion, that that number of qbs will be drafted before the bot gets to draft next. Let's say the next person in line has a 20% chance to draft a qb based on their lineup, then the qb draft number probability distribution after examining that person would look like {0: .8, 1: .2} because there is an 80% chance (.8 proportion) that 0 qbs are drafted by that person and a 20% chance that 1 qb is drafted by that person. It then looks at the next person in line and asks what the odds are that that person drafts a qb and updates the probability distribution accordingly. For example, if that next person has a 50% chance to draft a qb, then the new probability distribution would look like {0: .4, 1: .5, 2: .1}. This says that out of those two people's drafts, there's a .4 chance 0 qbs get drafted, a  .5 chance 1 does, and a .1 chance 2 do. It repeats this process for every drafter that is going to go between the current pick and the bot's next pick. Let's say at the end of the process the probability distribution looks like this: {0: .2, 1: .45, 2: .3, 3: .05} (really it would be more convoluted than this but I'm keeping it simple.) This probability distribution can be interpreted to mean the following: IF we decide to take a quarterback on the next round, THEN there is a 20% chance we will be able to draft the current best quarterback, there is a 45% chance we will be able to draft the next best quarterback, a 30% chance we will be stuck with the third best quarterback, and a 5% chance we get super unlucky and get stuck with the current fourth best quarterback on the board. The next step is to actually look at the expected point values of each quarterback to determine how much value we expect to lose. Of course, if the 4 best quarterbacks on the board are all equally as good as one another, there would be no reason to take a qb this round since we'd be able to get one just as good next round anyway. Let's say the 4 best quarterbacks currently on the board have expected fantasy points per week: 22, 20, 19, 14. Now the bot uses these numbers to essentially determine how bad it would be for each possible number of quarterbacks to get drafted. It creates a new probability distribution that looks like this:
{0: .2, 2: .45, 3: .3, 8: .05}. This distribution can be read as "there is a 20% chance that by the time I pick next, the best available quarterback will be 0 points per week worse than the current best available quarterback. There is a 45% chance that by the time I pick next, the best available quarterback will be 2 points per week worse than the current best available quarterback" and so on. It then takes the weighted average of each of these possibilities, 0*.2 + 2*.45 + 3*.3 + 8*.05 = 2.2 This means that on average, the best available quarterback by the time the bot is able to draft next will be 2.2 points worse than the current best available quarterback. This means qb has a "volatility" of 2.2. It then repeats this process for every position, and determines what position has the highest volatility, and suggests the user draft at that position. The numbers printed out next to each position during program execution is the position's volatility at the time.